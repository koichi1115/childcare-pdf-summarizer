# childcare-pdf-summarizer

📄✨ **学校・習い事から届くお知らせPDFを自動で要約し、Googleカレンダーに登録・ToDoも抽出するツール**  
Google Apps Script + Gemini API を活用した子育て家庭向け自動化スクリプトです。

---

## 🔧 主な機能

- 指定フォルダに追加された **PDFファイル・画像ファイル** を自動でチェック
- **Gemini 2.0 Flash API** を使って内容をAI要約
- 発行元（学校・習い事）を自動判別
- 要約、ToDo、持ち物、イベント情報を抽出
- Googleカレンダーに **要約付きの予定** を登録
- 抽出されたToDoを **Googleタスクに自動登録**

---

## 📁 対応する施設・ドキュメント

### 学校
- 保育園・幼稚園
- 小学校
- 中学校

### 習い事
- ピアノ教室
- 水泳教室
- サッカークラブ
- 学習塾
- その他各種習い事

### ドキュメント例
- 月間おたよりやイベントのお知らせ（PDF・画像）
- レッスンスケジュール（PDF・画像）
- 持ち物や準備が記載された案内文（PDF・画像）
- iPhoneカメラで撮影したお便り画像（JPEG・PNG）

---

## 🧠 使用している技術・API

- Google Apps Script (GAS)
- Gemini 2.0 Flash API（Generative Language API）
- Google Drive API
- Google Calendar API
- Google Tasks API

---

## ⚙️ セットアップ手順

### 1. フォルダとスクリプトの準備
- Google Drive に監視用のフォルダを作成
- Google Apps Script で新しいプロジェクトを作成
- `src/`フォルダ内の3つのファイル（`Code.gs`, `Config.gs`, `TaskManager.gs`）をコピー
- `appsscript.json`もコピーして、必要な権限を設定

### 2. スクリプトプロパティの設定

Google Apps Script のエディタで「プロジェクトの設定」→「スクリプト プロパティ」を開き、以下を設定：

#### 基本設定
| キー名 | 説明 | 例 |
|--------|------|-----|
| `folderId` | 対象PDFを格納するGoogle DriveフォルダのID | `1234567890abcdefg` |
| `GeminiKey` | Gemini APIのAPIキー（Google Cloud Consoleで発行） | `AIza...` |
| `taskListId` | GoogleタスクのリストID（省略可、自動取得） | `MTIzNDU2Nzg5...` |

#### 子供情報の設定
| キー名 | 値 |
|--------|-----|
| `childrenInfo` | 下記のJSON形式で子供の情報を設定 |

```json
[
  {
    "name": "お子様の氏名",
    "nameKana": "おこさまのしめい",
    "gender": "男性",
    "birthDate": "2020年3月16日"
  }
]
```

#### 学校・施設情報の設定
| キー名 | 値 |
|--------|-----|
| `institutionsInfo` | 下記のJSON形式で学校・施設の情報を設定 |

<details>
<summary>学校の設定例</summary>

```json
[
  {
    "name": "○○保育園",
    "type": "school",
    "schoolType": "保育園",
    "address": "〒000-0000 ○○県○○市○○区○○町1-1-1",
    "classes": "0歳児クラス=ひよこ組,1歳児クラス=うさぎ組,2歳児クラス=りす組",
    "students": [
      {
        "name": "お子様の氏名",
        "class": "らいおん組",
        "currentYear": "2025年4月現在"
      }
    ],
    "groupDefinitions": "乳児組=ひよこ組,うさぎ組,りす組 幼児組=ぺんぎん組,ぱんだ組,らいおん組"
  }
]
```
</details>

<details>
<summary>習い事の設定例</summary>

```json
[
  {
    "name": "○○音楽教室",
    "type": "activity",
    "address": "〒000-0000 ○○県○○市○○区○○町2-2-2",
    "students": [
      {
        "name": "お子様の氏名",
        "schedule": "毎週土曜日 16:30～17:00",
        "notes": "レッスンスケジュール：カレンダーに〇がついている日がレッスン日"
      }
    ]
  }
]
```
</details>

### 3. 設定確認用のヘルパー関数

設定のサンプルを確認したい場合は、以下の関数を実行：
- `showSampleConfig()`: 設定例を表示
- `listTaskLists()`: 利用可能なタスクリスト一覧を表示

### 4. トリガーの設定（任意）
- `summarizePDFsWithGemini` を定期的に実行する時間主導型トリガーを設定（推奨：5分間隔）

---

## 📝 Geminiへのプロンプト内容（要約方針）

AIには以下のような指示を与えています：

- 5ページ以上のPDFは処理しない
- 保育園／ピアノ教室を自動判別
- 子ども（氏名・学年）に関連する情報のみを要約
- ToDo、持ち物、イベントをそれぞれ抽出
- 件名はシンプルな形式で自動生成（例：ゆめの星保育園　5月のおたより）

---

## 🔒 セキュリティに関して

- APIキーは `Script Properties` に保存し、コードに直接書かないでください
- ファイルの取り扱いや出力内容の管理に注意してください（個人情報を含む可能性あり）

---

## 📌 注意事項

- PDFのページ数カウントはAPIに依存しており、トークンを節約するための前提指示に頼っています
- レッスンスケジュールなどの内容が正しく抽出されない場合は、PDFの構成や品質を確認してください

---

## 📄 ライセンス

MIT License  
本ツールはご自身の責任のもとでご利用ください。  
外部API利用にかかるコスト・制限・セキュリティに関しては、各サービスの利用規約を必ずご確認ください。

---

## 🎯 使用方法

### 基本的な使用方法
1. **PDF・画像ファイル**をGoogle Driveの指定フォルダにアップロード
   - 対応形式：PDF、JPEG、PNG
   - iPhoneで撮影した画像も対応
2. 1分以内に自動で処理開始
3. Googleカレンダーとタスクに自動登録

### 📱 iPhoneでの使用方法
1. お便りをiPhoneカメラで撮影
2. Google Driveアプリで指定フォルダにアップロード
3. 自動で要約・タスク抽出が実行される

## 💬 今後の拡張アイデア

- ~~PDF以外の画像やスキャン文書への対応（OCR連携）~~ ✅ **v2.0で実装済み**
- LINE通知連携（要約結果をLINEに送る）
- Googleタスクへの自動ToDo連携の本格実装
- スプレッドシート連携による履歴記録と検索性の向上

---

## 👶 このスクリプトが役立つ人

- 忙しい共働き家庭
- 保育園・習い事からの大量のお便りを整理したい人
- 子どもの予定や持ち物を忘れずに管理したい保護者
- 紙のお便りをデジタル化して管理したい人

---

## 🧑‍💻 開発者メモ（任意で編集してください）

このスクリプトは、実生活の課題（保育園や習い事の予定管理）を自動化したいという動機から生まれました。  
同じような悩みを持つ人にとって、小さな助けになることを願っています。
